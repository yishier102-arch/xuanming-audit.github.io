<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life OS | å†…æ ¸å®¡è®¡ç»ˆç«¯ (Hardware Layout)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript/lunar.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&display=swap');
        body { background-color: #000; color: #00FF00; font-family: 'Fira Code', monospace; }
        .scanline { width: 100%; height: 100%; background: linear-gradient(rgba(18,16,16,0) 50%, rgba(0,0,0,0.25) 50%); background-size: 100% 4px; position: fixed; top: 0; pointer-events: none; z-index: 50; }
        input[type="datetime-local"] { background: #000; border: 1px solid #00FF00; color: #00FF00; outline: none; }
        ::-webkit-calendar-picker-indicator { filter: invert(1); }
        .progress-bar { height: 8px; background: #051505; border: 1px solid #004400; overflow: hidden; }
        .progress-fill { height: 100%; background: #00FF00; box-shadow: 0 0 10px #00FF00; transition: width 1s ease-in-out; }
        .side-panel { font-size: 0.7rem; color: #008800; border: 1px solid #004400; background: rgba(0,20,0,0.2); }
        .tag-wood { color: #4ade80; } .tag-fire { color: #f87171; } .tag-earth { color: #fbbf24; } .tag-metal { color: #e2e8f0; } .tag-water { color: #60a5fa; }
    </style>
</head>
<body class="p-4 md:p-6">
<div class="scanline"></div>
<div class="max-w-6xl mx-auto border border-green-900 p-4 md:p-8 bg-black relative">
    <header class="mb-8 border-b border-green-900 pb-4 flex justify-between items-end">
        <div>
            <h1 class="text-2xl font-bold tracking-widest uppercase">Kernel_Audit_Terminal</h1>
            <p class="text-[10px] opacity-50">ç¡¬ä»¶å±‚çº§æ˜ å°„åè®®: BAZI_PHY_LAYER_V2</p>
        </div>
        <div class="text-right hidden md:block">
            <p class="text-[10px]">ç³»ç»Ÿæ—¶é—´: <span id="sys-time">2026-02-02</span></p>
            <p class="text-[10px]">AUTH_LEVEL: ROOT</p>
        </div>
    </header>

    <section class="mb-6 flex flex-wrap items-center gap-4 bg-green-950/20 p-4 border border-green-900/30">
        <span class="font-mono text-sm">> è¾“å…¥åˆå§‹æ—¶é—´æˆ³:</span>
        <input type="datetime-local" id="birth-time" class="p-1 text-sm">
        <button onclick="startAudit()" class="bg-green-600 hover:bg-green-400 text-black px-6 py-1 font-bold transition-all text-sm">
            æ‰§è¡Œå®Œæ•´å®¡è®¡ (Full Scan)
        </button>
    </section>

    <section id="terminal-scroll" class="bg-black border border-green-900 p-4 font-mono text-[10px] h-32 overflow-y-auto mb-6">
        <div id="output-log">READY. ç³»ç»Ÿå¾…å‘½ä¸­...</div>
    </section>

    <section id="report-zone" class="hidden">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4">

            <div class="side-panel p-3">
                <h3 class="border-b border-green-900 mb-2 pb-1 font-bold">å¤©å¹² / æ§åˆ¶é€»è¾‘</h3>
                <ul class="space-y-1 opacity-80">
                    <li>ç”² : <span class="tag-wood">æœ¨</span> (ä¸»é¢‘æ‰©å±•)</li>
                    <li>ä¹™ : <span class="tag-wood">æœ¨</span> (é€»è¾‘åˆ†æ”¯)</li>
                    <li>ä¸™ : <span class="tag-fire">ç«</span> (æ ¸å¿ƒæ¸²æŸ“)</li>
                    <li>ä¸ : <span class="tag-fire">ç«</span> (èƒ½æ•ˆè°ƒåº¦)</li>
                    <li>æˆŠ : <span class="tag-earth">åœŸ</span> (å­˜å‚¨é˜µåˆ—)</li>
                    <li>å·± : <span class="tag-earth">åœŸ</span> (ç¼“å­˜å¯»å€)</li>
                    <li>åºš : <span class="tag-metal">é‡‘</span> (æŒ‡ä»¤è¿‡æ»¤)</li>
                    <li>è¾› : <span class="tag-metal">é‡‘</span> (å›ºä»¶åŠ å›º)</li>
                    <li>å£¬ : <span class="tag-water">æ°´</span> (æ•°æ®æ€»çº¿)</li>
                    <li>ç™¸ : <span class="tag-water">æ°´</span> (æµè½¬åè®®)</li>
                </ul>
            </div>

            <div class="lg:col-span-2 border border-green-500/30 p-4 bg-green-950/10">
                <h2 class="text-center mb-4 text-sm font-bold border-b border-green-900 pb-2">ç‰©ç†èµ„æºåˆ†é…æ¦‚è§ˆ</h2>
                <div id="resource-grid" class="space-y-5"></div>
                <div class="mt-6 pt-4 border-t border-green-900/50 flex justify-between items-center text-[10px]">
                    <span>åŸå§‹åºåˆ—: <span id="raw-bazi-display" class="text-white"></span></span>
                    <span class="text-green-700 font-mono italic">ID: L-OS-AUDIT-2026</span>
                </div>
            </div>

            <div class="side-panel p-3">
                <h3 class="border-b border-green-900 mb-2 pb-1 font-bold">åœ°æ”¯ / ç‰©ç†é“¾è·¯</h3>
                <div class="grid grid-cols-1 gap-1 opacity-80">
                    <div>å­ : <span class="tag-water">æ°´</span> (åº•åº§è¿æ¥)</div>
                    <div>ä¸‘ : <span class="tag-earth">åœŸ</span> (æŒä¹…åŒ–å±‚)</div>
                    <div>å¯… : <span class="tag-wood">æœ¨</span> (åŠ¨æ€æ‰©å±•)</div>
                    <div>å¯ : <span class="tag-wood">æœ¨</span> (æ¥å£è€¦åˆ)</div>
                    <div>è¾° : <span class="tag-earth">åœŸ</span> (æ•°æ®ä»“åº“)</div>
                    <div>å·³ : <span class="tag-fire">ç«</span> (æ‰§è¡Œå•å…ƒ)</div>
                    <div>åˆ : <span class="tag-fire">ç«</span> (çƒ­åŒæ­¥å±‚)</div>
                    <div>æœª : <span class="tag-earth">åœŸ</span> (ç¯å¢ƒæ„ŸçŸ¥)</div>
                    <div>ç”³ : <span class="tag-metal">é‡‘</span> (å†…æ ¸åŠ å›º)</div>
                    <div>é…‰ : <span class="tag-metal">é‡‘</span> (ä¿¡å·ç­›é€‰)</div>
                    <div>æˆŒ : <span class="tag-earth">åœŸ</span> (å®‰å…¨éš”ç¦»)</div>
                    <div>äº¥ : <span class="tag-water">æ°´</span> (æµé‡é€šé“)</div>
                </div>
            </div>

        </div>
    </section>
</div>

<script>
    const ELEMENTS_DB = {
        'ç”²': 'æœ¨', 'ä¹™': 'æœ¨', 'å¯…': 'æœ¨', 'å¯': 'æœ¨',
        'ä¸™': 'ç«', 'ä¸': 'ç«', 'å·³': 'ç«', 'åˆ': 'ç«',
        'æˆŠ': 'åœŸ', 'å·±': 'åœŸ', 'è¾°': 'åœŸ', 'æˆŒ': 'åœŸ', 'ä¸‘': 'åœŸ', 'æœª': 'åœŸ',
        'åºš': 'é‡‘', 'è¾›': 'é‡‘', 'ç”³': 'é‡‘', 'é…‰': 'é‡‘',
        'å£¬': 'æ°´', 'ç™¸': 'æ°´', 'äº¥': 'æ°´', 'å­': 'æ°´'
    };

    const HARDWARE_MAP = {
        'æœ¨': { label: 'ç³»ç»Ÿæ‰©å±•æ€§ (Scalability)', icon: 'ğŸŒ³(åœŸ)', color: 'tag-wood' },
        'ç«': { label: 'æ¸²æŸ“æ‰§è¡ŒåŠ› (Rendering)', icon: 'ğŸ”¥(ç«)', color: 'tag-fire' },
        'åœŸ': { label: 'æ•°æ®åº“å­˜å‚¨åŠ› (Storage)', icon: 'ğŸªµ(æœ¨)', color: 'tag-earth' },
        'é‡‘': { label: 'å†…æ ¸é˜²ç«å¢™ (Security)', icon: 'ğŸ›¡ï¸(é‡‘)', color: 'tag-metal' },
        'æ°´': { label: 'ç½‘ç»œå¸¦å®½ (Connectivity)', icon: 'ğŸŒŠ(æ°´)', color: 'tag-water' }
    };

    async function log(msg, ms=40) {
        const out = document.getElementById('output-log');
        out.innerHTML += `<p class="mb-1 text-green-400/80">> ${msg}</p>`;
        document.getElementById('terminal-scroll').scrollTop = 9999;
        await new Promise(r => setTimeout(r, ms));
    }

    async function startAudit() {
        const timeStr = document.getElementById('birth-time').value;
        if(!timeStr) return alert("ERR: Timestamp Empty.");

        const [datePart, timePart] = timeStr.split('T');
        const [y, m, d] = datePart.split('-').map(Number);
        const [hh, mm] = timePart.split(':').map(Number);

        document.getElementById('output-log').innerHTML = '';
        document.getElementById('report-zone').classList.add('hidden');

        await log("æ­£åœ¨åˆå§‹åŒ–å†…æ ¸æ‰«æä»ª...");
        await log("æ­£åœ¨æ¡æ‰‹ LUNAR_OS åè®®æ ˆ...");

        const solar = Solar.fromYmdHms(y, m, d, hh, mm, 0);
        const bazi = solar.getLunar().getBaZi();

        await log(`æå–ç¡¬ä»¶åº•å±‚å“ˆå¸Œ: [${bazi.join('Â·')}]`);

        const counter = { 'é‡‘': 0, 'æœ¨': 0, 'æ°´': 0, 'ç«': 0, 'åœŸ': 0 };
        const allChars = bazi.join('').split('');

        allChars.forEach(char => {
            const el = ELEMENTS_DB[char];
            if (el) counter[el]++;
        });

        await log("æ­£åœ¨åˆ†æå¤©å¹²æ§åˆ¶é€»è¾‘ä¿¡å·...");
        await log("æ­£åœ¨æ‰«æåœ°æ”¯ç‰©ç†é“¾è·¯çŠ¶æ€...");
        await log("è®¡ç®—æ¨¡å—è€¦åˆåº¦ä¸èµ„æºå ä½ç¬¦...");
        await log("å®¡è®¡æˆåŠŸã€‚æ­£åœ¨å‘ˆç°æ¸²æŸ“å±‚...", 400);

        render(counter, bazi);
    }

    function render(counter, bazi) {
        const grid = document.getElementById('resource-grid');
        grid.innerHTML = '';
        document.getElementById('raw-bazi-display').innerText = bazi.join(' ');

        ['é‡‘', 'æœ¨', 'æ°´', 'ç«', 'åœŸ'].forEach(el => {
            const count = counter[el];
            const pct = (count / 8) * 100;
            const hw = HARDWARE_MAP[el];

            const div = document.createElement('div');
            div.innerHTML = `
                <div class="flex justify-between text-xs mb-1 ${hw.color}">
                    <span class="font-bold font-mono underline uppercase">${hw.icon} ${hw.label}</span>
                    <span class="font-mono">${count} / 8</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" style="width:${pct}%"></div></div>
                <div class="flex justify-between text-[8px] mt-1 opacity-40 font-mono">
                   <span>MODULE: ADDR_0x${el.charCodeAt(0).toString(16).toUpperCase()}</span>
                   <span>${count === 0 ? 'STATUS: CRITICAL_LOW' : 'STATUS: STABLE'}</span>
                </div>
            `;
            grid.appendChild(div);
        });
        document.getElementById('report-zone').classList.remove('hidden');
    }

    // è®¾ç½®é¡µé¢çš„å®æ—¶æ—¶é—´ï¼ˆæ¨¡æ‹Ÿæ•ˆæœï¼‰
    document.getElementById('sys-time').innerText = new Date().toISOString().split('T')[0];
</script>
</body>
</html>